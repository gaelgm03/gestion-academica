# Configuración .htaccess para API REST
# Sistema de Gestión Académica

# Habilitar reescritura de URLs
RewriteEngine On

# Permitir el header Authorization para JWT
RewriteCond %{HTTP:Authorization} ^(.*)
RewriteRule .* - [e=HTTP_AUTHORIZATION:%1]

# Reescritura de URLs para endpoints de API
# Formato: /api/docentes -> /api/docentes.php
# Formato: /api/docentes/123 -> /api/docentes.php (el ID se maneja en el PHP)

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/auth(/.*)?$ api/auth.php [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/docentes(/.*)?$ api/docentes.php [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/incidencias(/.*)?$ api/incidencias.php [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/reportes(/.*)?$ api/reportes.php [QSA,L]

# Configuración de PHP
php_flag display_errors Off
php_value error_reporting E_ALL
php_value error_log ../logs/php_errors.log
